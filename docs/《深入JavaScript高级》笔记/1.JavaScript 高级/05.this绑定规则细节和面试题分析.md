---
title: this绑定规则细节和面试题分析
date: 2022-12-26 21:08:18
permalink: /pages/a597d3/
categories:
  - 《深入JavaScript高级》笔记
tags:
  -
author:
  name: ZhangQiLong
  link: https://github.com/ZhangQiLong2023
---

# 06this 绑定规则细节和面试题分析

## V8 引擎优化数字类型 Sim

小的数字类型，在 V8 里面有一种 sim，可以表示 2 的 32 次方的数字，占用的空间大小是 4byte

所以当 number 类型的数字，太小的话，本来为 8 byte 大小的 number 类型数字，V8 引擎会对这种进行优化，转化为 sim 类型的数字，占用内存为 4 byte 大小的 sim

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image1.png)

V8 引擎关于 sim 值范围的 v8 源代码

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image2.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image3.png)

## new 绑定

### 使用 new 关键字来调用函数时，会执行如下操作

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image4.png)

### 一些函数的 this 分析

#### setTimeout

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image5.png)

**_获取元素之后，this 指向这个元素_**

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image6.png)

**数组里面的高阶函数，forEach map filter find 里面的第二个参数 是用于绑定 this 的值**

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image7.png)

## 规则优先级

### 默认规则的优先级最低

默认规则的优先级是最低的，因为存在其他规则时，就会通过其他规则的方式来绑定 this

### call /apply 的显示绑定高于隐式绑定

### 显示绑定(bind)优先级高于隐式绑定

#### 代码测试

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image8.png)

### new 绑定优先级高于隐式绑定

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image9.png)

### new 高于显示绑定

#### new 关键字不能和 apply/call 一起来使用。call 主动调一个函数，new 主动调一个函数，所以很难放在一起使用

#### new bind new 的优先级高于 bind

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image10.png)

### 总结：new 绑定-->显示绑定(apply/call/bind)-->隐式绑定(obj.foo())-->默认绑定(独立函数调用)

## this 规则之外-忽视显示绑定

### 使用 apply call bind 绑定 null undefined 的时候，会自动将 this 转换成 window

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image11.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image12.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image13.png)

### 特殊情况关于 ； 的问题

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image14.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image15.png)

#### 代码改进加上；即可

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image16.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image17.png)

#### 另外一个

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image18.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image19.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image20.png)

## 箭头函数 arrow function

### 特点

#### 箭头函数是不能和 new 一起编写的

### 箭头函数的编写

#### 1. () : 参数 2. => ：箭头 3.{} ：函数的执行体

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image21.png)

#### 箭头函数传参问题

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image22.png)

### 箭头函数一些常见的简写

#### 简写一： 如果参数只有一个，()可以省略

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image23.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image24.png)

#### 简写二：如果函数执行体只有一行代码，那么{}也可以省略

**强调，并且它会默认将这行代码的执行结果结果作为返回值**

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image25.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image26.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image27.png)

**第二种**

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image28.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image29.png)

#### 简写三：如果提个箭头函数，只有一行代码，并且返回一个对象，这个时候如何编写简写

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image30.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image31.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image32.png)

## this 规则之外 - 箭头函数 arrow function

### 箭头函数的 this 获取问题

#### 正常情况下其他函数，如果内部没有定义变量，那么就会去外层寻找

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image33.png)

#### 箭头函数也是一样

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image34.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image35.png)

#### 真实开发场景中的情况

**箭头函数之前**

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image36.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image37.png)

**箭头函数之后**

**settimeout 指向问题**https://blog.csdn.net/weixin_45727472/article/details/114333324![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image38.png)

## this 面试题

### this 面试题一：

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image39.png)

### this 面试题二：

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image40.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image41.png)

#### 第一个打印结果

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image42.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image43.png)

#### 第二个打印结果

**⭐⭐ \***注意点：对象没有作用域 对象里面的函数上层作用域是全局\*\*\*![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image44.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image45.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image46.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image47.png)

#### 第三个打印结果

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image48.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image49.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image50.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image51.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image52.png)

#### 第四个打印结果

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image53.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image54.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image55.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image55.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image57.png)

#### 答案总结

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image58.png)

### this 面试题三：

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image59.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image60.png)

#### 第一个打印结果

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image61.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image62.png)
![img](https://cdn.nlark.com/yuque/0/2022/png/27959575/1660989001029-2d2cb7f6-3ee8-4a65-af97-5f189c625eb8.png)

#### 第二个打印结果

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image64.png)
![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image65.png)

#### 第三个打印结果

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image66.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image67.png)

#### 第四个打印结果

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image68.png)

#### 第三题总结

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image69.png)

### this 面试题四：

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image70.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image71.png)

#### 前三个打印结果

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image72.png)

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image73.png)

#### 第四题结论

![img](http://www.zhangqilong.cn/img/qlBlog_images/深入JavaScript高级/06.this绑定规则细节和面试题分析/image74.png)
