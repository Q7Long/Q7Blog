---
title: nextTickæ ¸å¿ƒåŸç†è§£æ
date: 2022-01-13 21:57:43
permalink: /pages/4c48a1/
categories:
  - ã€ŠVueã€‹ç¬”è®°
  - Vue.jsæŠ€æœ¯æ­ç§˜
tags:
  -
author:
  name: Q7Long
  link: https://github.com/Q7Long
---

# ğŸ” ä»€ä¹ˆæ˜¯ Vue.nextTick()ï¼Ÿï¼Ÿ

**å®šä¹‰ï¼š**åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè·å–æ›´æ–°åçš„ DOMã€‚

æ‰€ä»¥å°±è¡ç”Ÿå‡ºäº†è¿™ä¸ªè·å–æ›´æ–°åçš„ DOM çš„ Vue æ–¹æ³•ã€‚æ‰€ä»¥æ”¾åœ¨ Vue.nextTick() å›è°ƒå‡½æ•°ä¸­çš„æ‰§è¡Œçš„åº”è¯¥æ˜¯ä¼šå¯¹ DOM è¿›è¡Œæ“ä½œçš„ js ä»£ç ï¼›

**ç†è§£ï¼š**nextTick()ï¼Œæ˜¯å°†å›è°ƒå‡½æ•°å»¶è¿Ÿåœ¨ä¸‹ä¸€æ¬¡ dom æ›´æ–°æ•°æ®åè°ƒç”¨ï¼Œç®€å•çš„ç†è§£æ˜¯ï¼šå½“æ•°æ®æ›´æ–°äº†ï¼Œåœ¨ dom ä¸­æ¸²æŸ“åï¼Œè‡ªåŠ¨æ‰§è¡Œè¯¥å‡½æ•°

## ğŸ¥¨ æ¡ˆä¾‹

![image-20230113142303907](http://www.zhangqilong.cn/img/qlBlog_images/VueåŸºç¡€/30_nextTickæ ¸å¿ƒåŸç†è§£æ/image-20230113142303907.png)

### ğŸŸ æ¡ˆä¾‹ä¸€

1. ä»£ç éƒ¨åˆ†

```vue
<template>
  <div>
    <h2 class="title" ref="titleRef">{{ message }}</h2>
    <button @click="getHeight">è·å–é«˜åº¦</button>
  </div>
</template>
<script>
import { ref } from "vue";
export default {
  setup() {
    const titleRef = ref(null);
    const message = ref("");
    const getHeight = () => {
      message.value += "Q7Long";
      console.log(titleRef.value.offsetHeight);
    };
    return {
      titleRef,
      getHeight,
      message,
    };
  },
};
</script>
<style>
.title {
  width: 100px;
}
</style>
```

2. é¡µé¢ç»“æœ

![nexttick_è·å–å†…å®¹é«˜åº¦](http://www.zhangqilong.cn/img/qlBlog_images/Vue%E5%9F%BA%E7%A1%80/30_nextTick%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/nexttick_%E8%8E%B7%E5%8F%96%E5%86%85%E5%AE%B9%E9%AB%98%E5%BA%A6.gif)

```js
// å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œä¼šç«‹å³ç»™ message å¢åŠ ä¸€ä¸²æ–‡æœ¬ï¼Œç„¶åè·å–æ­¤æ—¶ h2 çš„é«˜åº¦
// ä½†æ˜¯æ­¤æ—¶çš„ vue è¿˜æ²¡æœ‰æ›´æ–° domï¼Œæˆ‘ä»¬æ ¹æœ¬æ— æ³•è·å– dom æ›´æ–°åçš„é«˜åº¦ï¼Œåªèƒ½è·å–æ­¤æ—¶ h2 çš„é«˜åº¦
// æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€æ¬¡æˆ‘ä»¬ dom å·²ç»æ›´æ–°äº†ï¼Œä½†æ˜¯è·å–çš„é«˜åº¦ä¸º 0
```

#### ğŸ¿ è§£å†³æ–¹æ¡ˆä¸€ï¼šå°†å›è°ƒå‡½æ•°æ”¾è¿› onUpdated ä¸­

```vue
<template>
  <div>
    <h2 class="title" ref="titleRef">{{ message }}</h2>
    <button @click="getHeight">è·å–é«˜åº¦</button>
  </div>
</template>
<script>
import { ref, onUpdated } from "vue";
export default {
  setup() {
    const titleRef = ref(null);
    const message = ref("");
    const getHeight = () => {
      message.value += "Q7Long";
    };
    onUpdated(() => {
      console.log(titleRef.value.offsetHeight);
    });
    return {
      titleRef,
      getHeight,
      message,
    };
  },
};
</script>
<style>
.title {
  width: 100px;
}
</style>
```

é¡µé¢æ•ˆæœ:

![nexttick_è·å–å†…å®¹é«˜åº¦æ”¾å…¥onUpdatedä¸­](http://www.zhangqilong.cn/img/qlBlog_images/Vue%E5%9F%BA%E7%A1%80/30_nextTick%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/nexttick_%E8%8E%B7%E5%8F%96%E5%86%85%E5%AE%B9%E9%AB%98%E5%BA%A6%E6%94%BE%E5%85%A5onUpdated%E4%B8%AD.gif)

è¿™ç§æ–¹å¼è™½ç„¶ä¹Ÿèƒ½è§£å†³é—®é¢˜ï¼Œä½†å´ä¸åˆé€‚ï¼Œåœ¨å¼€å‘ä¸­ä¼šæœ‰å¾ˆå¤šä¸ªæ•°æ®ï¼Œé‚£ä»–ä»¬å°±ä¼šç›¸äº’å½±å“ï¼Œæ¯”å¦‚å¢åŠ ä¸€ä¸ª counter++ çš„æ“ä½œ

```vue
<template>
  <div>
    <h2 class="title" ref="titleRef">{{ message }}</h2>
    <button @click="getHeight">è·å–é«˜åº¦</button>
    <h2>{{ counter }}</h2>
    <button @click="increment">+1</button>
  </div>
</template>
<script>
import { ref, onUpdated } from "vue";
export default {
  setup() {
    const counter = ref(0);
    const titleRef = ref(null);
    const message = ref("");
    const getHeight = () => {
      message.value += "Q7Long";
    };
    const increment = () => {
      counter.value++;
    };
    onUpdated(() => {
      console.log(titleRef.value.offsetHeight);
    });
    return {
      titleRef,
      getHeight,
      message,
      counter,
      increment,
    };
  },
};
</script>
<style>
.title {
  width: 100px;
}
</style>
```

è™½ç„¶æ²¡æœ‰ç‚¹å‡»è·å– message çš„é«˜åº¦ï¼Œä½†æ˜¯ç”±äº counter++ å¼•èµ·çš„é¡µé¢æ›´æ–°ï¼Œè·å–é«˜åº¦çš„å‡½æ•°ä¹Ÿä¼šæ‰§è¡Œä¸€é

![nexttick_counter++å¼•èµ·çš„é¡µé¢æ›´æ–°](http://www.zhangqilong.cn/img/qlBlog_images/Vue%E5%9F%BA%E7%A1%80/30_nextTick%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/nexttick_counter++%E5%BC%95%E8%B5%B7%E7%9A%84%E9%A1%B5%E9%9D%A2%E6%9B%B4%E6%96%B0.gif)

#### ğŸ¿ è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ nexttick

```js
// ç»è¿‡ä¸Šè¿°ï¼Œå¸Œæœ›è¾¾åˆ°çš„æ˜¯ï¼Œæ“ä½œå®Œæ•°æ®ä¹‹åï¼Œéœ€è¦æ›´æ–° DOM å†å»è·å–é«˜åº¦å³å¯

message.value += "Q7Long";
// æ›´æ–° DOM
console.log("è·å–messageé«˜åº¦" + titleRef.value.offsetHeight);
```

1. ä»£ç éƒ¨åˆ†

```vue
<template>
  <div>
    <h2 class="title" ref="titleRef">{{ message }}</h2>
    <button @click="getHeight">è·å–é«˜åº¦</button>
    <h2>{{ counter }}</h2>
    <button @click="increment">+1</button>
  </div>
</template>
<script>
import { ref, onUpdated, nextTick } from "vue";
export default {
  setup() {
    const counter = ref(0);
    const titleRef = ref(null);
    const message = ref("");
    const getHeight = () => {
      message.value += "Q7Long";
      nextTick(() => {
        console.log("è·å–messageé«˜åº¦" + titleRef.value.offsetHeight);
      });
    };
    const increment = () => {
      counter.value++;
    };
    return {
      titleRef,
      getHeight,
      message,
      counter,
      increment,
    };
  },
};
</script>
<style>
.title {
  width: 100px;
}
</style>
```

2. é¡µé¢æ•ˆæœ

![nexttick_ä½¿ç”¨nextTickä¹‹åé¡µé¢æ•ˆæœ](http://www.zhangqilong.cn/img/qlBlog_images/Vue%E5%9F%BA%E7%A1%80/30_nextTick%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/nexttick_%E4%BD%BF%E7%94%A8nextTick%E4%B9%8B%E5%90%8E%E9%A1%B5%E9%9D%A2%E6%95%88%E6%9E%9C.gif)

è¿™æ—¶å€™å†ç†è§£å®˜æ–¹çš„è§£é‡Šå°±ä¸€ç›®äº†ç„¶äº†ï¼š

**å®šä¹‰ï¼š**åœ¨ä¸‹æ¬¡ **DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒ**ã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè·å–æ›´æ–°åçš„ DOMã€‚

### ğŸŸ ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨çš„ Vue.nextTick()ï¼Ÿï¼Ÿ

1ã€Vue ç”Ÿå‘½å‘¨æœŸçš„ **created() é’©å­å‡½æ•°è¿›è¡Œçš„ DOM æ“ä½œä¸€å®šè¦æ”¾åœ¨ Vue.nextTick() çš„å›è°ƒå‡½æ•°ä¸­**ï¼ŒåŸå› æ˜¯åœ¨ created() é’©å­å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ DOM å…¶å®å¹¶æœªè¿›è¡Œä»»ä½•æ¸²æŸ“ï¼Œè€Œæ­¤æ—¶è¿›è¡Œ DOM æ“ä½œæ— å¼‚äºå¾’åŠ³ï¼Œæ‰€ä»¥æ­¤å¤„ä¸€å®šè¦å°† DOM æ“ä½œçš„ js ä»£ç æ”¾è¿› Vue.nextTick() çš„å›è°ƒå‡½æ•°ä¸­ã€‚ä¸ä¹‹å¯¹åº”çš„å°±æ˜¯ mounted é’©å­å‡½æ•°ï¼Œå› ä¸ºè¯¥é’©å­å‡½æ•°æ‰§è¡Œæ—¶æ‰€æœ‰çš„ DOM æŒ‚è½½å·²å®Œæˆã€‚

```vue
created(){ let that=this; that.$nextTick(function(){
//ä¸ä½¿ç”¨this.$nextTick()æ–¹æ³•ä¼šæŠ¥é”™
that.$refs.titleRef.innerHTML="createdä¸­æ›´æ”¹äº†æŒ‰é’®å†…å®¹"; //å†™å…¥åˆ°DOMå…ƒç´  }); },
```

2ã€å½“é¡¹ç›®ä¸­ä½ æƒ³åœ¨**æ”¹å˜ DOM å…ƒç´ çš„æ•°æ®å**åŸºäºæ–°çš„ dom åšç‚¹ä»€ä¹ˆï¼Œ**å¯¹æ–° DOM ä¸€ç³»åˆ—çš„ js æ“ä½œéƒ½éœ€è¦æ”¾è¿› Vue.nextTick()çš„å›è°ƒå‡½æ•°ä¸­ï¼›**é€šä¿—çš„ç†è§£æ˜¯ï¼šæ›´æ”¹æ•°æ®åå½“ä½ æƒ³ç«‹å³ä½¿ç”¨ js æ“ä½œæ–°çš„è§†å›¾çš„æ—¶å€™éœ€è¦ä½¿ç”¨å®ƒ

## ğŸ¥¨nextTick åŸç†

### ğŸŸ ç®€è¿°

1. _vue_ å®ç°å“åº”å¼å¹¶ä¸æ˜¯æ•°æ®å‘ç”Ÿå˜åŒ–å _DOM_ ç«‹å³å˜åŒ–ï¼Œè€Œæ˜¯æŒ‰ç…§ä¸€å®šç­–ç•¥å¼‚æ­¥æ‰§è¡Œ _DOM_ æ›´æ–°çš„

2. _vue_ åœ¨ä¿®æ”¹æ•°æ®åï¼Œè§†å›¾ä¸ä¼šç«‹åˆ»è¿›è¡Œæ›´æ–°ï¼Œè€Œæ˜¯è¦ç­‰**åŒä¸€äº‹ä»¶å¾ªç¯æœºåˆ¶**å†…æ‰€æœ‰æ•°æ®å˜åŒ–å®Œæˆåï¼Œå†ç»Ÿä¸€è¿›è¡Œ DOM æ›´æ–°

3. `nextTick` å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒï¼Œç”¨äºè·å¾—æ›´æ–°åçš„ DOMã€‚

### ğŸŸ äº‹ä»¶å¾ªç¯æœºåˆ¶

æˆ‘ä»¬éƒ½çŸ¥é“ `JSå¼•æ“çº¿ç¨‹` æ˜¯ä¸“é—¨ç”¨æ¥è§£æ `JavaScript` è„šæœ¬çš„ï¼Œæ‰€æœ‰çš„ `JavaScript` ä»£ç éƒ½ç”±è¿™ä¸€ä¸ªçº¿ç¨‹æ¥è§£æã€‚ç„¶è€Œè¿™ä¸ª `JSå¼•æ“` æ˜¯å•çº¿ç¨‹çš„ï¼Œä¹Ÿå°±æ„å‘³ç€ `JavaScript` ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå‰é¢çš„å¿…é¡»å¤„ç†å¥½ï¼Œåé¢çš„æ‰ä¼šæ‰§è¡Œã€‚

ä½†æ˜¯ `JavaScript` ä¸­é™¤äº†ä¸€äº› `é¡ºåºæ‰§è¡Œ` çš„é€»è¾‘ä»£ç ï¼Œè¿˜æœ‰å¾ˆå¤š `å¼‚æ­¥ä»»åŠ¡`ï¼Œæ¯”å¦‚ `Ajaxè¯·æ±‚`ã€`å®šæ—¶å™¨` ç­‰ã€‚å¦‚æœ `JSå¼•æ“` åœ¨å•çº¿ç¨‹è§£æ `JavaScript` æ—¶é‡åˆ°äº†ä¸€ä¸ª `Ajaxè¯·æ±‚` ï¼Œé‚£å°±å¿…é¡»ç­‰ `Ajaxè¯·æ±‚` è¿”å›ç»“æœæ‰èƒ½ç»§ç»­æ‰§è¡Œåç»­çš„ä»£ç ï¼Œå¾ˆæ˜¾ç„¶è¿™æ ·çš„è¡Œä¸ºæ˜¯éå¸¸ä½æ•ˆçš„ã€‚

é‚£ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œ`äº‹ä»¶å¾ªç¯æœºåˆ¶` è¿™æ ·çš„æŠ€æœ¯å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ï¼š

```js
"JSå¼•æ“"åœ¨é¡ºåºæ‰§è¡Œ"JavaScript"ä»£ç æ—¶ï¼Œå¦‚æœé‡åˆ°"åŒæ­¥ä»£ç "ç«‹å³æ‰§è¡Œï¼›

å¦‚æœé‡åˆ°ä¸€äº›"å¼‚æ­¥ä»»åŠ¡"å°±ä¼šå°†è¿™ä¸ª"å¼‚æ­¥ä»»åŠ¡"äº¤ç»™å¯¹åº”çš„æ¨¡å—å¤„ç†ï¼Œç„¶åç»§ç»­æ‰§è¡Œåç»­ä»£ç ï¼›

å½“ä¸€ä¸ª"å¼‚æ­¥ä»»åŠ¡"åˆ°è¾¾è§¦å‘æ¡ä»¶æ—¶å°±å°†è¯¥"å¼‚æ­¥ä»»åŠ¡"çš„å›è°ƒæ”¾å…¥"ä»»åŠ¡é˜Ÿåˆ—"ä¸­ï¼›

å½“"JSå¼•æ“"ç©ºé—²ä»¥åï¼Œå°±ä¼šä»"ä»»åŠ¡é˜Ÿåˆ—"è¯»å–å’Œæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼›
```

> **è¡¥å……å†…å®¹:**
>
> 1.  `JSå¼•æ“çº¿ç¨‹` ä¹Ÿè¢«ç§°ä¸ºæ‰§è¡Œ `JS` ä»£ç çš„ `ä¸»çº¿ç¨‹`ï¼Œåç»­å¦‚æœå‡ºç° `ä¸»çº¿ç¨‹` è¿™æ ·çš„æè¿°ï¼ŒæŒ‡çš„å°±æ˜¯ `JSå¼•æ“çº¿ç¨‹`ã€‚
> 2.  `ä»»åŠ¡é˜Ÿåˆ—` å±äºæ•°æ®ç»“æ„ä¸­çš„é˜Ÿåˆ—ï¼Œç‰¹æ€§æ˜¯ `å…ˆè¿›å…ˆå‡º`ã€‚

#### ğŸŒ­JavaScript ä»»åŠ¡çš„åˆ†ç±»

![image-20230113191112790](http://www.zhangqilong.cn/img/qlBlog_images/Vue%E5%9F%BA%E7%A1%80/30_nextTick%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/image-20230113191112790.png)

åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„æ‰§è¡Œä»»åŠ¡åˆ†ä¸ºå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡

- å®ä»»åŠ¡ï¼š åŒ…æ‹¬`æ•´ä½“ä»£ç script`ï¼Œ`setTimeout`ï¼Œ`setInterval` ã€`setImmediate`ã€ I/O æ“ä½œã€UI æ¸²æŸ“

- å¾®ä»»åŠ¡ï¼š `Promise.then`ã€`MuationObserver`

![image-20230113180800518](http://www.zhangqilong.cn/img/qlBlog_images/Vue%E5%9F%BA%E7%A1%80/30_nextTick%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/image-20230113180800518.png)

#### ğŸŒ­ ä»»åŠ¡çš„æ‰§è¡Œé¡ºåº

æ¥ç€äº‹ä»¶å¾ªç¯æœºåˆ¶ä¸­ `JS` å¼•æ“å¯¹è¿™äº›ä»»åŠ¡çš„ `æ‰§è¡Œé¡ºåº` æè¿°å¦‚ä¸‹ï¼š

- æ­¥éª¤ä¸€ï¼š ä» `ä»£ç å¼€å§‹ï¼Œåˆ°` ä»£ç ç»“æŸï¼ŒæŒ‰é¡ºåºæ‰§è¡Œæ‰€æœ‰çš„ä»£ç ã€‚
- æ­¥éª¤äºŒï¼š åœ¨ `æ­¥éª¤ä¸€` é¡ºåºæ‰§è¡Œä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ° `åŒæ­¥ä»»åŠ¡` ï¼Œç«‹å³æ‰§è¡Œï¼Œç„¶åç»§ç»­æ‰§è¡Œåç»­ä»£ç ï¼›å¦‚æœé‡åˆ° `å¼‚æ­¥ä»»åŠ¡`ï¼Œå°† `å¼‚æ­¥ä»»åŠ¡` äº¤ç»™å¯¹åº”çš„æ¨¡å—å¤„ç†ï¼ˆ `äº‹ä»¶` äº¤ç»™ `äº‹ä»¶å¤„ç†çº¿ç¨‹` ï¼Œ`ajax` äº¤ç»™ `å¼‚æ­¥HTTPè¯·æ±‚çº¿ç¨‹`ï¼‰ï¼Œå½“ `å¼‚æ­¥ä»»åŠ¡` åˆ°è¾¾è§¦å‘æ¡ä»¶ä»¥åå°† `å¼‚æ­¥ä»»åŠ¡` çš„ `å›è°ƒå‡½æ•°` æ¨å…¥ `ä»»åŠ¡é˜Ÿåˆ—`ï¼ˆ `å®ä»»åŠ¡` æ¨å…¥ `å®ä»»åŠ¡é˜Ÿåˆ—`ï¼Œ`å¾®ä»»åŠ¡` æ¨å…¥ `å¾®ä»»åŠ¡é˜Ÿåˆ—`ï¼‰ã€‚
- æ­¥éª¤ä¸‰ï¼š`æ­¥éª¤ä¸€ `ç»“æŸåï¼Œè¯´æ˜åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ã€‚æ­¤æ—¶è¯»å–å¹¶æ‰§è¡Œ `å¾®ä»»åŠ¡é˜Ÿåˆ—` ä¸­ä¿å­˜çš„æ‰€æœ‰çš„`å¾®ä»»åŠ¡`ã€‚
- æ­¥éª¤å››ï¼š `æ­¥éª¤ä¸‰` å®Œæˆåè¯»å–å¹¶æ‰§è¡Œ `å®ä»»åŠ¡é˜Ÿåˆ—` ä¸­çš„`å®ä»»åŠ¡`ï¼Œæ¯æ‰§è¡Œå®Œä¸€ä¸ª `å®ä»»åŠ¡ `å°±å»æŸ¥çœ‹ `å¾®ä»»åŠ¡é˜Ÿåˆ—` ä¸­æ˜¯å¦æœ‰æ–°å¢çš„ `å¾®ä»»åŠ¡`ï¼Œå¦‚æœå­˜åœ¨åˆ™é‡å¤ `æ­¥éª¤ä¸‰`ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª `å®ä»»åŠ¡`ã€‚

![image-20230113185706086](http://www.zhangqilong.cn/img/qlBlog_images/Vue%E5%9F%BA%E7%A1%80/30_nextTick%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/image-20230113185706086.png)

![image-20230113200008615](http://www.zhangqilong.cn/img/qlBlog_images/Vue%E5%9F%BA%E7%A1%80/30_nextTick%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/image-20230113200008615.png)

> **è¡¥å……è¯´æ˜ ï¼ï¼ï¼**
>
> 1.  æ­¥éª¤å››ä¸­æè¿°çš„ `æ–°å¢çš„å¾®ä»»åŠ¡` å’Œæ­¥éª¤ä¸‰ä¸­æè¿°çš„ `å¾®ä»»åŠ¡` æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸º `å¼‚æ­¥ä»»åŠ¡` åªæœ‰æ»¡è¶³æ¡ä»¶ä»¥åæ‰ä¼šè¢«æ¨å…¥ `ä»»åŠ¡é˜Ÿåˆ—`ï¼Œ `æ­¥éª¤ä¸‰` åœ¨æ‰§è¡Œæ—¶ï¼Œä¸ä¸€å®šæ‰€æœ‰çš„ `å¾®ä»»åŠ¡` éƒ½ `åˆ°è¾¾è§¦å‘æ¡ä»¶` è€Œè¢«æ¨å…¥ `ä»»åŠ¡é˜Ÿåˆ—`ï¼›
>
> 2.  æ‰€è°“çš„ `åˆ°è¾¾è§¦å‘æ¡ä»¶` æŒ‡çš„æ˜¯ä¸‹é¢è¿™å‡ ç§æƒ…å†µï¼š
>
>     â‘  å®šæ—¶å™¨ï¼šå®šæ—¶å™¨è®¾ç½®çš„æ—¶é—´åˆ°è¾¾ï¼Œæ‰ä¼šå°†å®šæ—¶å™¨çš„å›è°ƒå‡½æ•°æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­
>
>     â‘¡ DOM äº‹ä»¶ï¼šDOM ç»‘å®šçš„äº‹ä»¶è¢«è§¦å‘ä»¥åï¼Œæ‰ä¼šå°†äº‹ä»¶çš„å›è°ƒå‡½æ•°æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­
>
>     â‘¢ å¼‚æ­¥è¯·æ±‚ï¼šå¼‚æ­¥è¯·æ±‚è¿”å›ç»“æœä»¥åï¼Œæ‰ä¼šå°†å¼‚æ­¥è¯·æ±‚çš„å›è°ƒå‡½æ•°æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­
>
>     â‘£ å¼‚æ­¥ä»»åŠ¡ä¹‹é—´çš„äº’ç›¸åµŒå¥—ï¼šæ¯”å¦‚ `å®ä»»åŠ¡A` åµŒå¥— `å¾®ä»»åŠ¡X`ï¼Œå½“ `å®ä»»åŠ¡A` å¯¹åº”çš„å›è°ƒå‡½æ•°ä»£ç æ²¡æœ‰è¢«æ‰§è¡Œåˆ°çš„æ—¶å€™ï¼Œå¾ˆæ˜¾ç„¶æ ¹æœ¬ä¸å­˜åœ¨ `å¾®ä»»åŠ¡X`ï¼›åªæœ‰ `å®ä»»åŠ¡A`å¯¹åº”çš„ `å›è°ƒå‡½æ•°` ä»£ç è¢«æ‰§è¡Œä»¥åï¼Œ`JS` å¼•æ“æ‰ä¼šè§£æåˆ° `å¾®ä»»åŠ¡X`ï¼Œæ­¤æ—¶ä¾ç„¶æ˜¯å°†è¯¥ `å¾®ä»»åŠ¡X`äº¤ç»™å¯¹åº”çš„çº¿ç¨‹å»å¤„ç†ï¼Œå½“ `å¾®ä»»åŠ¡X` æ»¡è¶³å‰é¢æè¿°çš„ â‘ ã€â‘¡ã€â‘¢ çš„æ¡ä»¶ï¼Œæ‰ä¼šå°†`å¾®ä»»åŠ¡X`å¯¹åº”çš„å›è°ƒæ¨å…¥ `ä»»åŠ¡é˜Ÿåˆ—`ï¼Œç­‰å¾… `JSå¼•æ“` å»æ‰§è¡Œã€‚
>
> 3.  æ‰€æœ‰çš„ `å¼‚æ­¥ä»»åŠ¡`éƒ½åœ¨ `JSå¼•æ“` é‡åˆ° `</script>` ä»¥åæ‰ä¼šå¼€å§‹æ‰§è¡Œã€‚
>
> 4.  `å®ä»»åŠ¡` å¯¹åº”çš„è‹±æ–‡æè¿°ä¸º `task`ï¼Œ`å¾®ä»»åŠ¡` å¯¹åº”çš„è‹±æ–‡æè¿°ä¸º `micro task`ï¼›`å®ä»»åŠ¡é˜Ÿåˆ— `æè¿°ä¸º `task quene`ï¼Œ`å¾®ä»»åŠ¡é˜Ÿåˆ— `æè¿°ä¸º `micro task quene`ã€‚

### ğŸŸ å…³äºä¸ºä»€ä¹ˆæ‰§è¡Œ console.log() é«˜åº¦çš„æ—¶å€™ nextTick() å°±å¯ä»¥è§£å†³é—®é¢˜

![image-20230113212403925](http://www.zhangqilong.cn/img/qlBlog_images/Vue%E5%9F%BA%E7%A1%80/30_nextTick%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/image-20230113212403925.png)

### ğŸŸ æ€»ç»“

Vue æ˜¯å¼‚æ­¥æ‰§è¡Œ dom æ›´æ–°çš„ï¼Œä¸€æ—¦è§‚å¯Ÿåˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°±ä¼šå¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œç„¶åæŠŠåœ¨åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯ (event loop) å½“ä¸­è§‚å¯Ÿåˆ°æ•°æ®å˜åŒ–çš„ watcher æ¨é€è¿›è¿™ä¸ªé˜Ÿåˆ—ã€‚å¦‚æœè¿™ä¸ª watcher è¢«è§¦å‘å¤šæ¬¡ï¼Œåªä¼šè¢«æ¨é€åˆ°é˜Ÿåˆ—ä¸€æ¬¡ã€‚è¿™ç§ç¼“å†²è¡Œä¸ºå¯ä»¥æœ‰æ•ˆçš„å»æ‰é‡å¤æ•°æ®é€ æˆçš„ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œã€‚è€Œåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯æ—¶ï¼ŒVue ä¼šæ¸…ç©ºé˜Ÿåˆ—ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„ DOM æ›´æ–°ã€‚
å½“ä½ è®¾ç½® `vm.someData = 'new value'`ï¼ŒDOM å¹¶ä¸ä¼šé©¬ä¸Šæ›´æ–°ï¼Œè€Œæ˜¯åœ¨å¼‚æ­¥é˜Ÿåˆ—è¢«æ¸…é™¤ï¼Œä¹Ÿå°±æ˜¯ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯å¼€å§‹æ—¶æ‰§è¡Œæ›´æ–°æ—¶æ‰ä¼šè¿›è¡Œå¿…è¦çš„ DOM æ›´æ–°ã€‚å¦‚æœæ­¤æ—¶ä½ æƒ³è¦æ ¹æ®æ›´æ–°çš„ DOM çŠ¶æ€å»åšæŸäº›äº‹æƒ…ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ã€‚ã€‚ä¸ºäº†åœ¨æ•°æ®å˜åŒ–ä¹‹åç­‰å¾… Vue å®Œæˆæ›´æ–° DOM ï¼Œå¯ä»¥åœ¨æ•°æ®å˜åŒ–ä¹‹åç«‹å³ä½¿ç”¨ Vue.nextTick(callback) ã€‚è¿™æ ·å›è°ƒå‡½æ•°åœ¨ DOM æ›´æ–°å®Œæˆåå°±ä¼šè°ƒç”¨ã€‚
